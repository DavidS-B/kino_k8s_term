import "https://cdn.jsdelivr.net/npm/xterm@5.0.0/lib/xterm.min.js";
const openTerminal = (ctx) => {
  const k8s_xterm = new Terminal();
  k8s_xterm.onKey((key) => ctx.pushEvent("key", key.key));
  k8s_xterm.open(ctx.root.querySelector(".k8s-xtermjs-container"));
  return k8s_xterm;
};
export function init(ctx, attrs) {
  ctx.importCSS("https://cdn.jsdelivr.net/npm/xterm@5.0.0/css/xterm.css");
  ctx.root.innerHTML = `
    <div id="k8s-terminal">
      <div class="k8s-xtermjs-container"></div>
    </div>
  `;
  const k8s_xterm = openTerminal(ctx);
  ctx.handleEvent("print-terminal", (data) => k8s_xterm.write(data));
  ctx.handleEvent("dispose-terminal", () => k8s_xterm.dispose());
  k8s_xterm.write(attrs.buffer);
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL2pzL21haW4uanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0veHRlcm1ANS4wLjAvbGliL3h0ZXJtLm1pbi5qc1wiO1xuXG5jb25zdCBvcGVuVGVybWluYWwgPSAoY3R4KSA9PiB7XG4gIGNvbnN0IGs4c194dGVybSA9IG5ldyBUZXJtaW5hbCgpO1xuXG4gIGs4c194dGVybS5vbktleSgoa2V5KSA9PiBjdHgucHVzaEV2ZW50KFwia2V5XCIsIGtleS5rZXkpKTtcbiAgazhzX3h0ZXJtLm9wZW4oY3R4LnJvb3QucXVlcnlTZWxlY3RvcihcIi5rOHMteHRlcm1qcy1jb250YWluZXJcIikpO1xuXG4gIHJldHVybiBrOHNfeHRlcm07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChjdHgsIGF0dHJzKSB7XG4gIGN0eC5pbXBvcnRDU1MoXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3h0ZXJtQDUuMC4wL2Nzcy94dGVybS5jc3NcIik7XG5cbiAgY3R4LnJvb3QuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgaWQ9XCJrOHMtdGVybWluYWxcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJrOHMteHRlcm1qcy1jb250YWluZXJcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICBjb25zdCBrOHNfeHRlcm0gPSBvcGVuVGVybWluYWwoY3R4KTtcbiAgY3R4LmhhbmRsZUV2ZW50KFwicHJpbnQtdGVybWluYWxcIiwgKGRhdGEpID0+IGs4c194dGVybS53cml0ZShkYXRhKSk7XG4gIGN0eC5oYW5kbGVFdmVudChcImRpc3Bvc2UtdGVybWluYWxcIiwgKCkgPT4gazhzX3h0ZXJtLmRpc3Bvc2UoKSk7XG4gIGs4c194dGVybS53cml0ZShhdHRycy5idWZmZXIpO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsT0FBTztBQUVQLE1BQU0sZUFBZSxDQUFDLFFBQVE7QUFDNUIsUUFBTSxZQUFZLElBQUksU0FBUztBQUUvQixZQUFVLE1BQU0sQ0FBQyxRQUFRLElBQUksVUFBVSxPQUFPLElBQUksR0FBRyxDQUFDO0FBQ3RELFlBQVUsS0FBSyxJQUFJLEtBQUssY0FBYyx3QkFBd0IsQ0FBQztBQUUvRCxTQUFPO0FBQ1Q7QUFFTyxnQkFBUyxLQUFLLEtBQUssT0FBTztBQUMvQixNQUFJLFVBQVUsd0RBQXdEO0FBRXRFLE1BQUksS0FBSyxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNckIsUUFBTSxZQUFZLGFBQWEsR0FBRztBQUNsQyxNQUFJLFlBQVksa0JBQWtCLENBQUMsU0FBUyxVQUFVLE1BQU0sSUFBSSxDQUFDO0FBQ2pFLE1BQUksWUFBWSxvQkFBb0IsTUFBTSxVQUFVLFFBQVEsQ0FBQztBQUM3RCxZQUFVLE1BQU0sTUFBTSxNQUFNO0FBQzlCOyIsCiAgIm5hbWVzIjogW10KfQo=
